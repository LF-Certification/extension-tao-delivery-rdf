require("core-js/modules/es7.symbol.async-iterator"),require("core-js/modules/es6.symbol"),require("core-js/modules/es6.array.find"),require("core-js/modules/es6.regexp.constructor"),require("core-js/modules/es6.regexp.to-string"),require("core-js/modules/web.dom.iterable"),require("core-js/modules/es6.array.iterator"),require("core-js/modules/es6.string.iterator"),require("core-js/modules/es6.function.name"),require("core-js/modules/es6.regexp.split"),require("core-js/modules/es6.promise"),require("core-js/modules/es6.object.to-string"),require("core-js/modules/es6.number.constructor"),require("core-js/modules/es6.regexp.match"),require("core-js/modules/es6.regexp.replace");function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}(function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("lodash"),require("context")):"function"==typeof define&&define.amd?define("util/url",["lodash","context"],t):(e=e||self,e["util/url"]=t(e._,e.context))})(this,function(e,t){'use strict';e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t;var r={absolute:/^(?:[a-z]+:)?\/\//i,base64:/^data:[^\/]+\/[^;]+(;charset=[\w]+)?;base64,/,query:/(?:^|&)([^&=]*)=?([^&]*)/g,url:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/};return{parse:function(e){var t,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","queryString","hash"],a=o.length,n=Object.create({toString:function toString(){return this.source}});if(n.base64=r.base64.test(e),n.base64)n.source=e;else{for(t=r.url.exec(e);a--;)n[o[a]]=t[a]||"";n.query={},n.queryString.replace(r.query,function(e,t,r){t&&(n.query[t]=r)})}return n},isAbsolute:function(e){return"object"===_typeof(e)&&e.hasOwnProperty("source")?e.source!==e.relative:"string"==typeof e?r.absolute.test(e):void 0},isRelative:function(e){var t=this.isAbsolute(e);if("boolean"==typeof t)return!t},isBase64:function(e){return"object"===_typeof(e)&&e.hasOwnProperty("source")?e.base64:"string"==typeof e?r.base64.test(e):void 0},encodeAsXmlAttr:function(e){return /[<>&']+/.test(e)?encodeURIComponent(e):e},build:function(t,r){var o,a,n="";return t&&(e.isString(t)&&(o=t),e.isArray(t)&&(o="",e.forEach(t,function(e){o+=/\/$/.test(o)&&/^\//.test(e)?e.substr(1):""===o||/\/$/.test(o)||/^\//.test(e)?e:"/"+e})),e.isPlainObject(r)&&(a=-1<o.indexOf("?"),n=e.reduce(r,function(t,r,o){return(!e.isEmpty(t)||a)&&(t+="&"),"object"!==_typeof(r)||e.isArray(r)?t+=encodeURIComponent(o)+"="+encodeURIComponent(r):e.forOwn(r,function(e,r){t+=encodeURIComponent(o)+"["+encodeURIComponent(r)+"]="+encodeURIComponent(e)+"&"}),t},n),!e.isEmpty(n)&&(!a&&(o+="?"),o+=n))),o},route:function(r,o,a,n,s){var i=[a,o,r];if(e.some(i,function(t){return e.isEmpty(t)||!e.isString(t)}))throw new TypeError("All parts are required to build an URL");return s=s||t&&t.root_url,this.build([s].concat(i),n)}}}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("lodash")):"function"==typeof define&&define.amd?define("core/pluginifier",["jquery","lodash"],t):(e=e||self,e["core/pluginifier"]=t(e.$,e._))}(this,function(e,t){'use strict';e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t;var r={options:function options(r,o,a){return this.each(function(){var o=e(this),n=o.data(r);n&&o.data(r,t.merge(n,a))})},disable:function disable(t,r){return this.each(function(){var o=e(this),a=o.data(t);a&&o.addClass(a.disableClass||"disabled").trigger("disable."+r)})},enable:function enable(t,r){return this.each(function(){var o=e(this),a=o.data(t);a&&o.removeClass(a.disableClass||"disabled").trigger("enable."+r)})}};return{register:function register(o,a,n){n=n||{};var s=n.ns||o.toLowerCase(),i=n.dataNs||"ui."+s,l=n.expose||[];return t.isFunction(e.fn[o])?e.error("A plugin named "+o+" is already registered"):t.isPlainObject(a)&&t.isFunction(a.init)?void(t.assign(a,t.transform(r,function(e,o,a){t.isFunction(o)&&(e[a]=t.partial(r[a],i,s))})),t.forEach(l,function(r){var o=r,n=r;/^_/.test(l)?n=n.replace(/^_/,""):o="_"+o,t.isFunction(a[o])&&!t.isFunction(a[n])&&(a[n]=function(){var t,r=Array.prototype.slice.call(arguments,0);return this.each(function(){t=a[o].apply(a,[e(this)].concat(r))}),t||this})}),e.fn[o]=function(t){if(a[t]){if(/^_/.test(t))e.error("Trying to call a private method `"+t+"`");else return a[t].apply(this,Array.prototype.slice.call(arguments,1));}else if("object"===_typeof(t)||!t)return a.init.apply(this,arguments);e.error("Method "+t+" does not exist on plugin")}):e.error("The object to register as a jQuery plugin must be a plain object with an `init` method.")}}}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("lodash")):"function"==typeof define&&define.amd?define("core/dataattrhandler",["jquery","lodash"],t):(e=e||self,e["core/dataattrhandler"]=t(e.$,e._))}(this,function(t,e){'use strict';t=t&&t.hasOwnProperty("default")?t["default"]:t,e=e&&e.hasOwnProperty("default")?e["default"]:e;var r={container:!1,listenerEvent:"click",useTarget:!0,bubbled:!1},o=[":radio",":checkbox"],a=function(e){return!e.is(o.join(","))},n=function(o,s){var i=this;this.options=e.defaults(s,r);var l="[data-"+o+"]";return e.has(this.options,"namespace")&&e.isString(this.options.namespace)?void(this.options.container&&this.options.container.selector&&(l=this.options.container.selector+" "+l),this.options.inner&&(l+=" "+this.options.inner),t(document).off(this.options.listenerEvent,l).on(this.options.listenerEvent,l,function(r){var s=t(r.target);if(!0===i.options.bubbled||s.is(l)){var d,c;void 0===s.data(o)&&(i.options.inner||i.options.bubbled)&&(c=s,s=s.parents("[data-"+o+"]")),d=!0===i.options.useTarget?n.getTarget(o,s):i.options.inner?c:void 0,s.data(i.options.namespace)||("function"==typeof i.createPlugin&&i.createPlugin(s,d),s.is(":radio")&&s.attr("name")&&t(":radio[name=\""+s.attr("name")+"\"]").not(s).on(i.options.listenerEvent,function(t){"function"==typeof i.callPluginMethod&&i.callPluginMethod(s,d),a(s)&&t.preventDefault()})),"function"==typeof i.callPluginMethod&&i.callPluginMethod(s,d),a(s)&&r.preventDefault()}})):t.error("The plugin data namespace option is required")};return n.prototype.init=function(e){return this.createPlugin=e,this},n.prototype.trigger=function(e){return this.callPluginMethod=e,this},n.getTarget=function(r,o){var a=/^(\+|>|~|:parent|<)/,n=[],s=o.attr("data-"+r)||o.attr("href")||o.attr("attrName");if(!e.isEmpty(s)){var i=a.exec(s);if(null!==i){var l=s.replace(a,"");n=":parent"===i[0]||"<"===i[0]?o.parents(l):"~"===i[0]?o.siblings(l):"+"===i[0]?o.next(l):t(l,o)}else n=t(s)}return n},n}),define("taoDeliveryRdf/controller/DeliveryMgmt/editDelivery",["jquery","util/url","ui/modal"],function(e,t){'use strict';return{start:function start(){e("#exclude-btn").click(function(){var r=e(this).data("delivery");e("#testtaker-form").load(t.route("excludeTesttaker","DeliveryMgmt","taoDeliveryRdf",{uri:r}),function(){e("body").prepend(e("#modal-container")),e("#testtaker-form").modal()})})}}}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("lodash")):"function"==typeof define&&define.amd?define("core/format",["lodash"],t):(e=e||self,e["core/format"]=t(e._))}(this,function(e){'use strict';function t(t){var o=Array.prototype.slice.call(arguments,1);return e.reduce(t.match(r),function(e,r,a){var n="";if(void 0!==o[a]){switch(r){case"%d":n=+o[a];break;case"%j":try{n=JSON.stringify(o[a]).replace(/"/g,"")}catch(t){}break;default:n=o[a];}t=t.replace(r,n)}return t},t)}e=e&&e.hasOwnProperty("default")?e["default"]:e;var r=/(%[sdj])/g;return t}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("core/promise",t):(e=e||self,e["core/promise"]=t())}(this,function(){'use strict';return Promise}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("lodash"),require("core/format"),require("core/promise")):"function"==typeof define&&define.amd?define("core/logger/api",["lodash","core/format","core/promise"],t):(e=e||self,e["core/logger/api"]=t(e._,e["core/format"],e["core/promise"]))}(this,function(e,t,r){'use strict';e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t,r=r&&r.hasOwnProperty("default")?r["default"]:r;var o="info",a={fatal:60,error:50,warn:40,info:30,debug:20,trace:10},n=[],s=function(t){return"undefined"==typeof t||e.isString(t)&&!e.has(a,t)?o:e.isNumber(t)?e.findKey(a,function(e){return e===t})||o:t},i=function(t){return e.isString(t)&&e.has(a,t)?a[t]:e.isNumber(t)&&e.contains(a,t)?t:a[o]},l=function(e,t){return i(t)>=i(e)},d=function r(d,c,u){var f,p;if(!e.isString(d)||e.isEmpty(d))throw new TypeError("A logger needs a name");return e.isPlainObject(c)&&"undefined"==typeof field&&(u=c,c=o),f=e.defaults(u||{},{name:d,pid:1,hostname:navigator.userAgent}),p={log:function(i,d,u){var p,m,h=[],g=new Date().toISOString();if(!1!==r.providers&&l(c||o,i))return e.isString(d)||d instanceof Error?(u=d,d={},h=[].slice.call(arguments,2)):h=[].slice.call(arguments,3),p={level:s(i),v:0,time:g},l(a.error,i)||u instanceof Error?(u instanceof Error?m=u:(u=e.isObject(u)?JSON.stringify(u):u,m=new Error(u)),p.msg=m.message,p.err=m):p.msg=t.apply(null,[u].concat(h)),e.merge(p,f,d),n.push(p),r.flush(),this},level:function level(e){return"undefined"==typeof e?s(c):(c=i(e),this)},child:function(t){return r(d,c,e.defaults(t,f))}},e.reduce(a,function(t,r,o){return t[o]=e.partial(p.log,r),t},p)};return d.levels=a,d.providers=!1,d.load=function(t){var o=this,a=[];return this.providers=[],new r(function(r,n){e.forEach(t,function(e,t){a.push(t)}),require(a,function(){var s=[].slice.call(arguments);e.forEach(s,function(e,r){try{o.register(e,t[a[r]])}catch(e){n(e)}}),o.flush(),r()},n)})},d.register=function(t,r){if(!e.isPlainObject(t)||!e.isFunction(t.log))throw new TypeError("A log provider is an object with a log method");t.checkMinLevel=l,e.isFunction(t.setConfig)&&t.setConfig(r),this.providers=this.providers||[],this.providers.push(t)},d.flush=function(){e.isArray(this.providers)&&0<this.providers.length&&(e.forEach(n,function(t){e.forEach(d.providers,function(e){e.log.call(e,t)})}),n=[])},d.setDefaultLevel=function(e){return o=s(e),o},d}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("lodash"),require("module"),require("core/logger/api")):"function"==typeof define&&define.amd?define("core/logger",["lodash","module","core/logger/api"],t):(e=e||self,e["core/logger"]=t(e._,e.module,e["core/logger/api"]))}(this,function(e,t,r){'use strict';e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t,r=r&&r.hasOwnProperty("default")?r["default"]:r;var o={level:r.levels.warn,loggers:{"core/logger/console":{level:"warn"}}},a=e.defaults(t.config()||{},o),n=r("core/logger");return r.setDefaultLevel(a.level),r.load(a.loggers),window.onerror=function(e,t,r,o){n.error("Caught[via window.onerror]: '"+e+"' from "+t+":"+r+":"+o)},window.setTaoLogLevel=function(e){return r.setDefaultLevel(e)},r}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("lodash"),require("core/promise"),require("lib/uuid"),require("core/logger")):"function"==typeof define&&define.amd?define("core/eventifier",["lodash","core/promise","lib/uuid","core/logger"],t):(e=e||self,e["core/eventifier"]=t(e._,e["core/promise"],e["lib/uuid"],e["core/logger"]))}(this,function(e,t,r,o){'use strict';function a(t){return!e.isString(t)||e.isEmpty(t)?[]:e(t.split(/\s/g)).compact().uniq().value()}function n(e){return-1<e.indexOf(".")?e.substr(0,e.indexOf(".")):e}function s(e){return-1<e.indexOf(".")?e.substr(e.indexOf(".")+1):"@"}function i(){return{before:[],between:[],after:[]}}function l(o){var l,c,u,f={},p=function(e,t){var r=n(e),o=s(e);return t=t||"between",f[o]=f[o]||{},f[o][r]=f[o][r]||i(),f[o][r][t]},m={on:function(t,r){return e.isFunction(r)&&e.forEach(a(t),function(e){p(e).push(r)}),this},off:function(t){return e.forEach(a(t),function(t){var r,o=n(t),a=s(t);a&&!o?"*"===a?(r={},r["@"]=f["@"],f=r):f[a]={}:e.forEach(f,function(e,t){e[o]&&("@"===a||a===t)&&(e[o]=i())})}),this},removeAllListeners:function(){return f={},this},trigger:function(r){function o(e,t,r){var o={name:t,namespace:r};e.before.length?l(e.before,o).then(function(){d(e,o)}).catch(function(e){h("before",o,e)}):d(e,o)}function l(e,r){var o,a=v.slice();return a.unshift(r),o=e.map(function(e){var o=!g(r.name)&&e.apply(y,a);return!1===o?t.reject():o}),t.all(o)}function d(e,t){g(t.name)?h("before",t):m(e.between,t).then(function(){p(e.after,t)}).catch(function(e){h("on",t,e)})}function p(e,t){g(t.name)?h("on",t):m(e,t).then(function(){g(t.name)&&h("after",t)}).catch(function(e){h("after",t,e)})}function m(e,r){var o;return o=e.map(function(e){return g(r.name)?t.reject():e.apply(y,v)}),t.all(o)}function h(e,t,r){r instanceof Error&&c.error(r),c.trace({err:r,event:t.name,stoppedIn:e},t.name+" handlers stopped")}function g(e){return u[e]}var y=this,v=[].slice.call(arguments,1);return u={},e.forEach(a(r),function(t){var r=s(t),a=n(t),l=e(f).filter(function(e,t){return e[a]&&("@"===r||r===t||"*"===t)}).reduce(function(e,t){return e.before=e.before.concat(t[a].before),e.between=e.between.concat(t[a].between),e.after=e.after.concat(t[a].after),e},i());c.trace({event:t,args:v},"trigger %s",t),l&&o(l,a,r)}),this},before:function(t,r){return e.isFunction(r)&&e.forEach(a(t),function(e){p(e,"before").push(r)}),this},after:function(t,r){return e.isFunction(r)&&e.forEach(a(t),function(e){p(e,"after").push(r)}),this},stopEvent:function(t){e.isString(t)&&!e.isEmpty(t.trim())&&(u[t.trim()]=!0)},spread:function(t,r){var o=this;return t&&e.isFunction(t.trigger)&&(e.isString(r)&&(r=a(r)),e.forEach(r,function(e){o.on(e,function(){var r=[e].concat([].slice.call(arguments));t.trigger.apply(t,r)})})),this}};return o=o||{},l=o.name||o.id||o.serial||r(6),c=d.child({target:l}),e(m).functions().forEach(function(t){e.isFunction(o[t])&&d.warn("The target object has already a method named "+t,o),o[t]=function(){var e=[].slice.call(arguments);return m[t].apply(o,e)}}),o}e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t,r=r&&r.hasOwnProperty("default")?r["default"]:r,o=o&&o.hasOwnProperty("default")?o["default"]:o;var d=o("core/eventifier");return l}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("util/regexEscape",t):(e=e||self,e["util/regexEscape"]=t())}(this,function(){'use strict';return function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("util/regexEscape")):"function"==typeof define&&define.amd?define("util/wrapLongWords",["util/regexEscape"],t):(e=e||self,e["util/wrapLongWords"]=t(e["util/regexEscape"]))}(this,function(e){'use strict';function t(t,o){t=t.toString().replace(/([\w])</g,"$1 <");for(var a,n=new RegExp(".{1,"+o+"}","g"),s=t.match(new RegExp("[\\S]{"+o+",}","g"))||[],l=s.length;l--;)a=r(s[l],n),t=t.replace(new RegExp(e(s[l]),"g"),a);return t}e=e&&e.hasOwnProperty("default")?e["default"]:e;var r=function(e,t){for(var r=e.match(t),o=r.length,a="",n="",s=[".",":",";"];o--;)n=r[o].charAt(0),-1<s.indexOf(n)&&(r[o]=r[o].substr(1)),-1<s.indexOf(a)&&(r[o]+=a),a=n;return r.join(" ")};return t}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("util/encode",t):(e=e||self,e["util/encode"]=t())}(this,function(){'use strict';var e=/"/g,t=/'/g,r=function(e){return document.createElement("a").appendChild(document.createTextNode(e)).parentNode.innerHTML};return{html:r,attribute:function(o){return r(o).replace(e,"&quot;").replace(t,"&apos;")},encodeBase64:function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))},decodeBase64:function(e){return decodeURIComponent(Array.prototype.map.call(atob(e),function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}}}),define("taoDeliveryRdf/controller/DeliveryMgmt/testtaker",["jquery","i18n","helpers","module","layout/section","ui/feedback"],function(e,t,r,o,a,n){'use strict';function s(){var t,r=e(this).parent().attr("id");"excludedList"==r?t=e("#assignedList"):"assignedList"==r&&(t=e("#excludedList")),"undefined"!=typeof t&&(t.append(this),this.scrollIntoView())}var i,l=e("#tt-filter"),d=e("#assignedList"),c=function(){var e=l.val();clearTimeout(i),i=setTimeout(function(){u(new RegExp(e),d)},300)},u=function(t,r){r.children().each(function(r,o){null===e(o).text().match(t)?e(o).hide():e(o).show()})};return{start:function start(){e("#save-tt").click(function(){var o=[];e("#excludedList > li").each(function(){o.push(e(this).data("uri"))});var s=e("input[name=\"assemblyUri\"]").val();e.ajax({url:r._url("saveExcluded","DeliveryMgmt","taoDeliveryRdf"),type:"POST",data:{uri:s,excluded:JSON.stringify(o)},dataType:"json",success:function success(e){e.saved&&(n().success(t("Selection saved successfully")),a.loadContentBlock(r._url("editDelivery","DeliveryMgmt","taoDeliveryRdf"),{uri:s}))}})}),e("#assignedList > li").click(s),e("#excludedList > li").click(s),e("#close-tt").click(function(){e("#testtaker-form").modal("close")}),l.keyup(c).siblings(".ctrl").click(c)}}}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("lodash"),require("core/promise"),require("core/eventifier"),require("lib/uuid")):"function"==typeof define&&define.amd?define("core/promiseQueue",["lodash","core/promise","core/eventifier","lib/uuid"],t):(e=e||self,e["core/promiseQueue"]=t(e._,e["core/promise"],e["core/eventifier"],e["lib/uuid"]))}(this,function(e,t,r,o){'use strict';return e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t,r=r&&r.hasOwnProperty("default")?r["default"]:r,o=o&&o.hasOwnProperty("default")?o["default"]:o,function(){var a={},n=function e(){var t="promise-"+o(6);return"undefined"==typeof a[t]?t:e()};return{add:function(e){return a[n()]=e,this},getValues:function(){return e.values(a)},clear:function(){return a={},this},serie:function(o){var s=n(),i=this.getValues(),l=r();return a[s]=new t(function(e){l.on("fulfilled",e)}),t.all(i).then(function(){if(e.isFunction(o))return o()}).then(function(e){return l.trigger("fulfilled"),delete a[s],e}).catch(function(e){throw a={},e})}}}}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("lodash"),require("core/promise"),require("core/promiseQueue"),require("lib/uuid")):"function"==typeof define&&define.amd?define("core/store/localstorage",["lodash","core/promise","core/promiseQueue","lib/uuid"],t):(e=e||self,e["core/store/localstorage"]=t(e._,e["core/promise"],e["core/promiseQueue"],e["lib/uuid"]))}(this,function(e,t,r,o){'use strict';e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t,r=r&&r.hasOwnProperty("default")?r["default"]:r,o=o&&o.hasOwnProperty("default")?o["default"]:o;var a=window.localStorage,n="index",s="id",i=r(),l=function(e,r,o){return new t(function(t,n){try{a.setItem("tao-store-"+e+"."+r,JSON.stringify(o)),t(!0)}catch(e){n(e)}})},d=function(e,r){return new t(function(t,o){var n;try{n=a.getItem("tao-store-"+e+"."+r),null===n?t():t(JSON.parse(n))}catch(e){o(e)}})},c=function(){return d(n,"stores")},u=function(e){return c().then(function(t){return t=t||{},t[e]={name:e,lastOpen:Date.now()},l(n,"stores",t)})},f=function(e){return c().then(function(t){return t=t||{},delete t[e],l(n,"stores",t)})},p=function(r){var o,n=!1,s=function(){return n?t.resolve():u(r).then(function(){n=!0})};if(e.isEmpty(r)||!e.isString(r))throw new TypeError("The store name is required");return o="tao-store-"+r+".",{getItem:function(e){return i.serie(function(){return s().then(function(){return d(r,e)})})},setItem:function(e,t){return i.serie(function(){return s().then(function(){return l(r,e,t)})})},removeItem:function(e){return i.serie(function(){return s().then(function(){return a.removeItem(o+e),!0})})},getItems:function(){var t=new RegExp("^"+o);return i.serie(function(){return s().then(function(){return e(a).map(function(e,t){return a.key(t)}).filter(function(e){return t.test(e)}).reduce(function(e,t){var r,n=t.replace(o,"");try{r=a.getItem(t),null!==r&&(e[n]=JSON.parse(r))}catch(t){e[n]=null}return e},{})})})},clear:function(){var t=new RegExp("^"+o);return i.serie(function(){return s().then(function(){return e(a).map(function(e,t){return a.key(t)}).filter(function(e){return t.test(e)}).forEach(function(e){a.removeItem(e)}),!0})})},removeStore:function(){return this.clear().then(function(){return f(r)})}}};return p.removeAll=function(r){return e.isFunction(r)||(r=null),c().then(function(o){var a=e(o).filter(function(e,t){return!r||r(t,e)}).map(function(e){return e&&e.name?p(e.name).removeStore():t.resolve()}).value();return t.all(a)})},p.getAll=function(t){return c().then(function(r){return e(r).filter(function(e,r){return!t||t(r,e)}).map(function(e){return e.name}).value()})},p.getStoreIdentifier=function(){var t=p(s);return t.getItem(s).then(function(r){return e.isEmpty(r)?(r=o(),t.setItem(s,r).then(function(){return r})):r})},p}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("lodash"),require("core/promise"),require("lib/store/idbstore"),require("lib/uuid")):"function"==typeof define&&define.amd?define("core/store/indexeddb",["lodash","core/promise","lib/store/idbstore","lib/uuid"],t):(e=e||self,e["core/store/indexeddb"]=t(e._,e["core/promise"],e["lib/store/idbstore"],e["lib/uuid"]))}(this,function(e,t,r,o){'use strict';e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t,r=r&&r.hasOwnProperty("default")?r["default"]:r,o=o&&o.hasOwnProperty("default")?o["default"]:o;var a,n="id",s="getAll"in IDBObjectStore.prototype,i=function(e){return new t(function(t,o){var a=new r({dbVersion:1,storeName:e,storePrefix:"tao-store-",keyPath:"key",autoIncrement:!0,onStoreReady:function(){a.db.onversionchange=function(t){t&&t.newVersion||a.db.close()},t(a)},onError:o})})},l=function(e,r,o){return new t(function(t,a){e.put({key:r,value:o},function(e){t(e===r)},a)})},d=function(e,r){return new t(function(t,o){e.get(r,function(e){return e&&"undefined"!=typeof e.value?void t(e.value):t(e)},o)})},c=function(r){return new t(function(t,o){var a=function(r){return e.isArray(r)?void t(e.reduce(r,function(e,t){return t.key&&t.value&&(e[t.key]=t.value),e},{})):t({})};r.getAll(a,o)})},u=function(e,r){return new t(function(t,o){e.remove(r,function(e){t(!1!==e)},o)})},f=function(){return a||(a=i("index")),a},p=function(e){return f().then(function(t){return l(t,e,{name:e,lastOpen:Date.now()})})},m=function(e){return f().then(function(t){return u(t,e)})},h=function(e,r){return new t(function(t,o){var a=function(){m(r).then(function(){t(!0)}).catch(o)};s?e.deleteDatabase(a,o):e.clear(a,o)})},g=function(r){var o,a,n=function(){return o||(o=i(r).then(function(e){return p(r).then(function(){return t.resolve(e)})})),o},s=function(e){return a?new t(function(t,r){var o=function(){var o=e();a=o,o.then(t).catch(r)};a.then(o).catch(o)}):(a=e(),a)};if(e.isEmpty(r)||!e.isString(r))throw new TypeError("The store name is required");return{getItem:function(e){return s(function(){return n().then(function(t){return d(t,e)})})},setItem:function(e,t){return s(function(){return n().then(function(r){return l(r,e,t)})})},removeItem:function(e){return s(function(){return n().then(function(t){return u(t,e)})})},getItems:function(){return s(function(){return n().then(function(e){return c(e)})})},clear:function(){return s(function(){return n().then(function(e){return new t(function(t,r){e.clear(function(){t(!0)},r)})})})},removeStore:function(){return s(function(){return n().then(function(e){return h(e,r)})})}}};return g.removeAll=function(r){return e.isFunction(r)||(r=null),f().then(function(o){return new t(function(a,n){function s(o){var s=[];e.forEach(o,function(e){var t=e&&e.key;t&&s.push(i(t).then(function(o){if(!r||r(t,e.value))return h(o,t)}))}),t.all(s).then(a).catch(n)}o.getAll(s,n)})})},g.getAll=function(r){return e.isFunction(r)||(r=function(){return!0}),f().then(function(o){return new t(function(t,a){o.getAll(function(o){var a=e(o).filter(function(e){return e&&e.key&&r(e.key,e.value)}).map(function(e){return e.key}).value();return t(a)},a)})})},g.getStoreIdentifier=function(){return i(n).then(function(t){return d(t,n).then(function(r){return e.isEmpty(r)?(r=o(),l(t,n,r).then(function(){return r})):r})})},g}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("lodash"),require("core/promise"),require("lib/uuid")):"function"==typeof define&&define.amd?define("core/store/memory",["lodash","core/promise","lib/uuid"],t):(e=e||self,e["core/store/memory"]=t(e._,e["core/promise"],e["lib/uuid"]))}(this,function(e,t,r){'use strict';e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t,r=r&&r.hasOwnProperty("default")?r["default"]:r;var o,a={},n=function(r){if(e.isEmpty(r)||!e.isString(r))throw new TypeError("The store name is required");return a[r]=a[r]||{},{getItem:function(o){return e.isPlainObject(a[r])?t.resolve(a[r][o]):t.resolve()},setItem:function(o,n){return e.isPlainObject(a[r])||(a[r]={}),a[r][o]=n,t.resolve(!0)},removeItem:function(o){return a[r]=e.omit(a[r],o),t.resolve("undefined"==typeof a[r][o])},getItems:function(){return t.resolve(a[r])},clear:function(){return a[r]={},t.resolve(!0)},removeStore:function(){return a=e.omit(a,r),t.resolve("undefined"==typeof a[r])}}};return n.removeAll=function(r){return e.isFunction(r)||(r=null),a=e.omit(a,function(e,t){return!r||r(t)}),t.resolve(!0)},n.getAll=function(r){var o=[];return e.isFunction(r)||(r=null),o=e(a).map(function(e,t){return t}).filter(function(e){return!r||r(e)}).value(),t.resolve(o)},n.getStoreIdentifier=function(){return e.isEmpty(o)&&(o=r()),t.resolve(o)},n}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("lodash"),require("moment"),require("module"),require("core/logger"),require("core/promise"),require("core/store/localstorage"),require("core/store/indexeddb"),require("core/store/memory")):"function"==typeof define&&define.amd?define("core/store",["lodash","moment","module","core/logger","core/promise","core/store/localstorage","core/store/indexeddb","core/store/memory"],t):(e=e||self,e["core/store"]=t(e._,e.moment,e.module,e["core/logger"],e["core/promise"],e["core/store/localstorage"],e["core/store/indexeddb"],e["core/store/memory"]))}(this,function(e,t,r,o,a,n,s,i){'use strict';e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t,r=r&&r.hasOwnProperty("default")?r["default"]:r,o=o&&o.hasOwnProperty("default")?o["default"]:o,a=a&&a.hasOwnProperty("default")?a["default"]:a,n=n&&n.hasOwnProperty("default")?n["default"]:n,s=s&&s.hasOwnProperty("default")?s["default"]:s,i=i&&i.hasOwnProperty("default")?i["default"]:i;var l,d=!1,c=!1,u=!1,f=["removeAll","getAll","getStoreIdentifier"],p=["getItem","setItem","removeItem","getItems","clear","removeStore"],m=o("core/store"),h=e.defaults(r.config()||{},{lowSpaceRatio:80,invalidation:{staled:"P2W",oldster:"P2M"}}),g=function(){return c?a.resolve(d):new a(function(e){var t,r,o=function(t){return d=!!t,c=!0,e(d)};try{if(r=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,!r)return o(!1);t=r.open("__feature_test",1),t.onsuccess=function(){if(t.result)return t.result.close(),o(!0)},t.onerror=function(t){return t.preventDefault(),o(!1),!1}}catch(e){o(!1)}})},y=function(){!u&&"storage"in window.navigator&&window.navigator.storage.estimate&&window.navigator.storage.estimate().then(function(t){var r=0;e.isNumber(t.usage)&&e.isNumber(t.quota)&&0<t.quota&&(r=t.usage/t.quota,r>h.lowSpaceRatio?(m.warn("The browser storage is getting low "+r.toFixed(2)+"% used",t),m.warn("We will attempt to clean oldster databases in persistent backends"),l.cleanUpSpace(h.invalidation.oldster,[],n),g&&l.cleanUpSpace(h.invalidation.oldster,[],s)):m.debug("Browser storage estimate : "+r.toFixed(2)+"% used",t))}).catch(function(e){m.warn("Unable to retrieve quotas : "+e.message)}),u=!0},v=function(t){return e.all(f,function(r){return e.isFunction(t[r])})},b=function(t){return e.all(p,function(r){return e.isFunction(t[r])})},k=function(t){return g().then(function(){var r=t||(d?s:n);return e.isFunction(r)?v(r)?(r!==i&&y(),r):a.reject(new TypeError("This backend doesn't comply with the store backend API")):a.reject(new TypeError("No backend, no storage!"))})};l=function(e,t){return k(t).then(function(t){var r=t(e);return b(r)?r:a.reject(new TypeError("The store doesn't comply with the Storage interface"))})},l.backends={localStorage:n,indexedDB:s,memory:i},l.removeAll=function(e,t){return k(t).then(function(t){return t.removeAll(e)})},l.cleanUpSpace=function(r,o,a){var n,s=function(t,r){return!!(t&&r)&&(!(o instanceof RegExp)||o.test(t))&&e.isNumber(r.lastOpen)&&e.isNumber(n)&&r.lastOpen<=n};return e.isNumber(r)&&0<r?n=r:(!e.isString(r)&&(r=h.invalidation.oldster),n=t().subtract(t.duration(r)).valueOf()),m.info("Trying to remove stores lastly opened before "+n+"("+r+")"),l.removeAll(s,a)},l.getAll=function(e,t){return k(t).then(function(t){return t.getAll(e)})},l.getIdentifier=function(e){return k(e).then(function(e){return e.getStoreIdentifier()})};var x=l;return x}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("lodash"),require("core/promise"),require("core/store")):"function"==typeof define&&define.amd?define("core/tokenStore",["lodash","core/promise","core/store"],t):(e=e||self,e["core/tokenStore"]=t(e._,e["core/promise"],e["core/store"]))}(this,function(e,t,r){'use strict';function o(o){var n=e.defaults(o||{},a),s=function(){return r("tokenStore.tokens",r.backends.memory)};return{dequeue:function(){var r=this;return r.getIndex().then(function(o){var a=e.first(o);return a?s().then(function(e){return e.getItem(a)}).then(function(e){return r.remove(a).then(function(){return e})}):t.resolve()})},enqueue:function(t){var r=this;return e.isString(t)&&(t={value:t,receivedAt:Date.now()}),s().then(function(e){return e.setItem(t.value,t)}).then(function(e){return!!e&&r.enforceMaxSize().then(function(){return!0})})},getIndex:function(){return this.getTokens().then(function(t){return e.chain(t).values().sort(function(e,t){return e.receivedAt-t.receivedAt}).map("value").value()})},has:function(t){return this.getIndex().then(function(r){return e.contains(r,t)})},remove:function(e){return this.has(e).then(function(t){return!!t&&s().then(function(t){return t.removeItem(e)})})},clear:function(){return s().then(function(e){return e.clear()})},getTokens:function(){return s().then(function(e){return e.getItems()})},getSize:function(){return this.getIndex().then(function(e){return e.length})},setMaxSize:function(t){var r=this;e.isNumber(t)&&0<t&&t!==n.maxSize&&(n.maxSize=t,r.enforceMaxSize())},enforceMaxSize:function(){var r=this;return this.getIndex().then(function(o){var a,s=o.length-n.maxSize;return!(0<s)||(a=o.slice(0,s),t.all(e.map(a,function(e){return r.remove(e)})))})},checkExpiry:function(e){return!(Date.now()-e.receivedAt>n.tokenTimeLimit)||this.remove(e.value)},expireOldTokens:function(){var r=this;return r.getTokens().then(function(o){return e.reduce(o,function(e,t){return e.then(function(){return r.checkExpiry(t)})},t.resolve()).then(function(){return!0})})}}}e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t,r=r&&r.hasOwnProperty("default")?r["default"]:r;var a={maxSize:6,tokenTimeLimit:1440000};return o}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("lodash"),require("module"),require("core/tokenStore"),require("core/promise"),require("core/promiseQueue")):"function"==typeof define&&define.amd?define("core/tokenHandler",["lodash","module","core/tokenStore","core/promise","core/promiseQueue"],t):(e=e||self,e["core/tokenHandler"]=t(e._,e.module,e["core/tokenStore"],e["core/promise"],e["core/promiseQueue"]))}(this,function(e,t,r,o,a){'use strict';function n(n){var l;return e.isString(n)&&(n={initialToken:n}),n=e.defaults({},n,i),l=r(n),{getToken:function(){var e=this,t=n.initialToken,r=function(){return l.dequeue().then(function(e){return e?e.value:null})};return t?(n.initialToken=null,o.resolve(t)):l.expireOldTokens().then(function(){return l.getSize()}).then(function(t){return 0<t?r():s?o.reject(new Error("No tokens available. Please refresh the page.")):e.getClientConfigTokens().then(r)})},setToken:function(e){return l.enqueue(e)},getClientConfigTokens:function(){var r=this,n=e.map(t.config().tokens,function(e){return{value:e,receivedAt:Date.now()}});return s=!0,o.resolve(n).then(function(t){var o=a();return e.forEach(t,function(e){o.serie(function(){return r.setToken(e)})}),o.serie(function(){return!0})})},clearStore:function(){return l.clear()},getQueueLength:function(){return l.getSize()},setMaxSize:function(e){l.setMaxSize(e)}}}e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t,r=r&&r.hasOwnProperty("default")?r["default"]:r,o=o&&o.hasOwnProperty("default")?o["default"]:o,a=a&&a.hasOwnProperty("default")?a["default"]:a;var s=!1,i={maxSize:6,tokenTimeLimit:1440000};return n}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("lodash"),require("i18n"),require("module"),require("context"),require("core/promise"),require("core/promiseQueue"),require("core/tokenHandler"),require("core/logger")):"function"==typeof define&&define.amd?define("core/request",["jquery","lodash","i18n","module","context","core/promise","core/promiseQueue","core/tokenHandler","core/logger"],t):(e=e||self,e["core/request"]=t(e.$,e._,e.__,e.module,e.context,e["core/promise"],e["core/promiseQueue"],e["core/tokenHandler"],e["core/logger"]))}(this,function(e,t,r,o,a,n,s,i,l){'use strict';function d(s){function i(){var o=function(){var e=t.extend({},s.headers);return s.noToken?n.resolve(e):c.getToken().then(function(t){return e["X-CSRF-Token"]=t||"none",e})},i=function(e){var r;return t.isFunction(e.getResponseHeader)&&(r=e.getResponseHeader("X-CSRF-Token"),f.debug("received %s header %s","X-CSRF-Token",r),r)?c.setToken(r):n.resolve()};return o().then(function(o){return new n(function(n,l){var d;e.ajax({url:s.url,method:s.method||"GET",headers:o,data:s.data,contentType:s.contentType||d,dataType:s.dataType||"json",async:!0,timeout:1e3*s.timeout||1e3*a.timeout||0,beforeSend:function beforeSend(){t.isEmpty(o)||f.debug("sending %s header %s","X-CSRF-Token",o&&o["X-CSRF-Token"])},global:!s.background}).done(function(e,t,o){i(o).then(function(){return 204===o.status||e&&204===e.errorCode||"nocontent"===t?n():403===o.status||e&&403===e.errorCode?l(p(e,o.status+" : "+o.statusText,o.status,0<o.readyState)):200===o.status||e&&!0===e.success?n(e):void l(p(e,r("The server has sent an empty response"),o.status,0<o.readyState))}).catch(function(t){f.error(t),l(p(e,t,o.status,0<o.readyState))})}).fail(function(e,o,a){var n;try{n=JSON.parse(e.responseText)}catch(t){n=e.responseText}n=t.defaults(n,{success:!1,source:"network",cause:s.url,purpose:"proxy",context:this,code:e.status,sent:0<e.readyState,type:"error",message:a||r("An error occurred!")}),i(e).then(function(){l(p(n,e.status+" : "+e.statusText,e.status,0<e.readyState))}).catch(function(t){f.error(t),l(p(n,t,e.status,0<e.readyState))})})})})}if(o.config().noToken&&(s.noToken=!0),t.isEmpty(s.url))throw new TypeError("At least give a URL...");return c.getQueueLength().then(function(e){return!0===s.noToken?i():s.sequential||1===e?u.serie(i):i()})}e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t,r=r&&r.hasOwnProperty("default")?r["default"]:r,o=o&&o.hasOwnProperty("default")?o["default"]:o,a=a&&a.hasOwnProperty("default")?a["default"]:a,n=n&&n.hasOwnProperty("default")?n["default"]:n,s=s&&s.hasOwnProperty("default")?s["default"]:s,i=i&&i.hasOwnProperty("default")?i["default"]:i,l=l&&l.hasOwnProperty("default")?l["default"]:l;var c=i(),u=s(),f=l("core/request"),p=function(e,t,r,o){var a;return a=e&&e.errorCode?new Error(e.errorCode+" : "+(e.errorMsg||e.errorMessage||e.error)):new Error(t),a.response=e,a.sent=o,r&&(a.code=r),a};return d}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("lodash"),require("core/request")):"function"==typeof define&&define.amd?define("core/dataProvider/request",["lodash","core/request"],t):(e=e||self,e["core/dataProvider/request"]=t(e._,e["core/request"]))}(this,function(e,t){'use strict';function r(r,o,a,n,s,i){return t({url:r,data:o,method:a,headers:n,background:s,noToken:!1!==i}).then(function(t){return e.isUndefined(t)?Promise.resolve():t.success?Promise.resolve(t.data):Promise.reject(t)}).catch(function(e){return Promise.reject(e)})}return e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t,r}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("lodash")):"function"==typeof define&&define.amd?define("util/namespace",["lodash"],t):(e=e||self,e["util/namespace"]=t(e._))}(this,function(e){'use strict';e=e&&e.hasOwnProperty("default")?e["default"]:e;var t=/\s/g,r=".",o={split:function(r,o){return!e.isString(r)||e.isEmpty(r)?[]:(o&&(r=r.toLowerCase()),e(r.trim().split(t)).compact().uniq().value())},getName:function(t){return!e.isString(t)||e.isEmpty(t)?"":-1<t.indexOf(r)?t.substr(0,t.indexOf(r)):t},getNamespace:function(t,o){return!e.isString(t)||e.isEmpty(t)?"":-1<t.indexOf(r)?t.substr(t.indexOf(r)+1):o||"@"},namespaceAll:function(t,a,n){var s;return e.isArray(t)||(t=o.split(t,n)),n&&(a=a.toLowerCase()),s=a?r+a:"",e(t).map(function(e){return 0>e.indexOf(r)?e+s:e}).compact().uniq().value().join(" ")}};return o}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("jquery"),require("lodash"),require("util/namespace")):"function"==typeof define&&define.amd?define("util/shortcut/registry",["jquery","lodash","util/namespace"],t):(e=e||self,e["util/shortcut/registry"]=t(e.$,e._,e["util/namespace"]))}(this,function(e,t,r){'use strict';var c=String.fromCharCode;function o(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}function a(e,t,r){e.removeEventListener?e.removeEventListener(t,r,!1):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null}function n(e){var t=e.which||e.keyCode,r=32<=t?c(t).toLowerCase():"",o=e.key&&e.key.toLowerCase(),a=e.code&&e.code.toLowerCase();return a&&(0===a.indexOf("key")?("a">o||"z"<o)&&"a"<=r&&"z">=r&&(o=r):0===a.indexOf("digit")&&(o=a.substr(5))),p[t]||o||r}function s(e){var t={clickLeft:!1,clickRight:!1,clickMiddle:!1,clickBack:!1,clickForward:!1};if(e.buttons)t.clickLeft=!!(1&e.buttons),t.clickRight=!!(2&e.buttons),t.clickMiddle=!!(4&e.buttons),t.clickBack=!!(8&e.buttons),t.clickForward=!!(16&e.buttons);else switch(e.button){case 0:t.clickLeft=!0;break;case 1:t.clickMiddle=!0;break;case 2:t.clickRight=!0;break;case 3:t.clickBack=!0;break;case 4:t.clickForward=!0;}return t}function i(e){return{scrollUp:0>e.deltaY,scrollDown:0<e.deltaY}}function l(e){var t=f[e.key]||e.key,r=[];return e.ctrlKey&&r.push("control"),e.altKey&&r.push("alt"),e.shiftKey&&r.push("shift"),e.metaKey&&r.push("meta"),e.scrollDown&&r.push("scrollDown"),e.scrollUp&&r.push("scrollUp"),e.clickLeft&&r.push("clickLeft"),e.clickRight&&r.push("clickRight"),e.clickMiddle&&r.push("clickMiddle"),e.clickBack&&r.push("clickBack"),e.clickForward&&r.push("clickForward"),t&&0>r.indexOf(t)&&r.push(t),r.join("+")}function d(e){var o=r.getName(e).split("+"),a={keyboardInvolved:!1,mouseClickInvolved:!1,mouseWheelInvolved:!1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,key:null,scrollUp:null,scrollDown:null,clickLeft:null,clickRight:null,clickMiddle:null,clickBack:null,clickForward:null};return t.forEach(o,function(e){if(u[e])a[u[e]]=!0;else if(0<=e.indexOf("mouse")){if(a.keyboardInvolved)throw new Error("A shortcut cannot involve both mouse and regular keys!");0<=e.indexOf("scroll")&&(a.mouseWheelInvolved=!0,a.scrollUp=0<=e.indexOf("up"),a.scrollDown=0<=e.indexOf("down")),0<=e.indexOf("click")&&(a.mouseClickInvolved=!0,a.clickLeft=0<=e.indexOf("left"),a.clickRight=0<=e.indexOf("right"),a.clickMiddle=0<=e.indexOf("middle"),a.clickBack=0<=e.indexOf("back"),a.clickForward=0<=e.indexOf("forward"))}else{if(a.mouseClickInvolved||a.mouseWheelInvolved)throw new Error("A shortcut cannot involve both mouse and regular keys!");a.keyboardInvolved=!0,a.key=e}}),a}e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t,r=r&&r.hasOwnProperty("default")?r["default"]:r;var u={ctrl:"ctrlKey",alt:"altKey",option:"altKey",shift:"shiftKey",meta:"metaKey",cmd:"metaKey",win:"metaKey"},f={escape:"esc",arrowdown:"down",arrowleft:"left",arrowright:"right",arrowup:"up"},p={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",91:"meta",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",145:"scrolllock",144:"numlock"};return function(c,u){function f(e,t){return K[t]=K[t]||{},K[t][e]=K[t][e]||[],K[t][e]}function p(e){return t.reduce(K,function(t,r){return r[e]&&(t=t.concat(r[e])),t},[])}function m(e,r){r&&!e?K[r]={}:t.forEach(K,function(t,o){t[e]&&("*"===r||r===o)&&(t[e]=[])})}function h(e,r){e.options=t.defaults(t.merge(e.options||{},r),u)}function g(){E||(o(c,"keydown",P),E=!0),C++}function y(){C--,0>=C&&(C=0,E&&(a(c,"keydown",P),E=!1))}function v(){T||(o(c,"click",j),T=!0),q++}function b(){q--,0>=q&&(q=0,T&&(a(c,"click",j),T=!1))}function k(){A||(o(c,"wheel",S),A=!0),D++}function x(){D--,0>=D&&(D=0,A&&(a(c,"wheel",S),A=!1))}function w(e,t){L[e]=t,t.keyboardInvolved&&g(),t.mouseClickInvolved&&v(),t.mouseWheelInvolved&&k()}function O(e){var t=L[e];L[e]=null,t&&(t.keyboardInvolved&&y(),t.mouseClickInvolved&&b(),t.mouseWheelInvolved&&x())}function P(e){I(e,{keyboardInvolved:!0,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,key:n(e)})}function j(e){I(e,t.merge({mouseClickInvolved:!0,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey},s(e)))}function S(e){I(e,t.merge({mouseClickInvolved:!0,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey},i(e)))}function I(r,o){var a,n,s=l(o),i=L[s];if(i&&!M.disabled){if(!0===i.options.avoidInput&&(n=e(r.target),n.closest("[type=\"text\"],textarea").length&&(!i.options.allowIn||!n.closest(i.options.allowIn).length)))return;!1===i.options.propagate&&r.stopPropagation(),!0===i.options.prevent&&r.preventDefault(),a=p(s),a&&t.forEach(a,function(e){e(r,s)})}}var E=!1,T=!1,A=!1,C=0,q=0,D=0,L={},K={},M={};return c.jquery&&(c=c.get(0)),{set:function(e,o){return t.forEach(r.split(e,!0),function(e){var t=d(e),r=l(t);h(t,o),w(r,t)}),this},add:function(e,o,a){return t.isFunction(o)&&t.forEach(r.split(e,!0),function(e){var t=r.getNamespace(e,"*"),n=d(e),s=l(n);h(n,a),w(s,n),f(s,t).push(o)}),this},remove:function(e){return t.forEach(r.split(e,!0),function(e){var t=r.getNamespace(e,"*"),o=d(e),a=l(o);m(a,t),p(a).length||O(a)}),this},exists:function(e){var o=(e+"").trim().toLowerCase(),a=r.getNamespace(o,"*"),n=d(o),s=l(n),i=!1;return L[s]?i="*"===a||!!f(s,a).length:!s&&(i=!t.isEmpty(K[a])),i},clear:function(){return L={},K={},C=0,q=0,D=0,y(),b(),x(),this},getState:function(e){return!!M[e]},setState:function(e,t){return M[e]=!!t,this},enable:function(){return this.setState("disabled",!1),this},disable:function(){return this.setState("disabled",!0),this}}}}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(require("lodash"),require("core/promise"),require("core/eventifier")):"function"==typeof define&&define.amd?define("core/polling",["lodash","core/promise","core/eventifier"],t):(e=e||self,e["core/polling"]=t(e._,e["core/promise"],e["core/eventifier"]))}(this,function(e,t,r){'use strict';e=e&&e.hasOwnProperty("default")?e["default"]:e,t=t&&t.hasOwnProperty("default")?t["default"]:t,r=r&&r.hasOwnProperty("default")?r["default"]:r;var o=function(o){var n,s,i,l,d,c,u,f,a=Math.abs,p={},m=function(){n=setTimeout(g,i),p.stopped=!1,p.pending=!0},h=function(){clearTimeout(n),n=null,p.stopped=!0,p.pending=!1},g=function(){return l&&d>=l?void y.stop():void(d=(d||0)+1,p.processing=!0,p.pending=!1,y.trigger("call"),c.call(u,y),!s&&!p.stopped&&(p.processing=!1,m()))},y={async:function(){var e={};return s=new t(function(t,r){e.resolve=t,e.reject=r}),s.then(function(){s=null,p.processing=!1,p.stopped||m(),y.trigger("resolved")}).catch(function(){s=null,p.processing=!1,y.stop(),y.trigger("rejected")}),y.trigger("async",e),e},next:function(){var e;return(p.stopped&&(d=0),h(),l&&d>=l)?this:(p.stopped=!1,s?(e=this.next.bind(this),s.then(e).catch(e)):(this.trigger("next"),g()),this)},start:function(){return n||(d=0,m(),this.trigger("start")),this},stop:function(){return h(),this.trigger("stop"),this},setInterval:function(e){return i=a(parseInt(e,10)||60000),this.trigger("setinterval",i),this},getInterval:function(){return i},setAction:function(e){return c=e,this.trigger("setaction",c),this},getAction:function(){return c},setContext:function(e){return u=e||this,this.trigger("setcontext",e),this},getContext:function(){return u},setMax:function(e){return l=a(parseInt(e,10)||0),this},getMax:function(){return l},getIteration:function(){return d||0},is:function(e){return!!p[e]}};return r(y),i=60000,u=y,c=null,p.stopped=!0,f=!1,d=0,e.isFunction(o)&&(y.setAction(o),o=null),e.isObject(o)&&(y.setAction(o.action),y.setInterval(o.interval||arguments[1]),y.setContext(o.context),y.setMax(o.max),f=!!o.autoStart),f&&y.start(),y};return o}),define("taoDeliveryRdf/controller/DeliveryMgmt/wizard",["lodash","jquery","i18n","ui/filter","ui/feedback","util/url","layout/actions","core/promise","ui/taskQueue/taskQueue","ui/taskQueueButton/standardButton"],function(e,t,r,o,a,n,s,i,l,d){'use strict';var c={list:function(e){return new i(function(o,a){t.ajax({url:n.route("getAvailableTests","DeliveryMgmt","taoDeliveryRdf"),data:{q:e.q,page:e.page},type:"GET",dataType:"JSON"}).done(function(e){e?o(e):a(new Error(r("Unable to load tests")))}).fail(function(){a(new Error(r("Unable to load tests")))})})}},u=function(e){s.trigger("refresh",{uri:e})};return{start:function start(){var n,s,i=t(".test-select-container"),f=t("#test"),p=t("#simpleWizard"),m=p.closest(".content-block");o(i,{placeholder:r("Select the test you want to publish to the test-takers"),width:"64%",quietMillis:1e3,label:r("Select the test")}).on("change",function(e){f.val(e),e?n.enable():n.disable()}).on("request",function(e){c.list(e.data).then(function(t){e.success(t)}).catch(function(t){e.error(t),a().error(t)})}).render("<%- text %>"),s=p.find(".form-submitter"),n=d({type:"info",icon:"delivery",title:r("Publish the test"),label:r("Publish"),taskQueue:l,taskCreationUrl:p.prop("action"),taskCreationData:function(){return p.serializeArray()},taskReportContainer:m}).on("finished",function(t){t.task&&t.task.report&&e.isArray(t.task.report.children)&&t.task.report.children.length&&t.task.report.children[0]&&(t.task.report.children[0].data&&t.task.report.children[0].data.uriResource?(a().info(r("%s completed",t.task.taskLabel)),u(t.task.report.children[0].data.uriResource)):this.displayReport(t.task.report.children[0],r("Error")))}).on("continue",function(){u()}).on("error",function(e){a().error(e)}).render(s.closest(".form-toolbar")).disable(),s.replaceWith(n.getElement().css({float:"right"}))}}}),define("taoDeliveryRdf/controller/Publish/index",["jquery","lodash","i18n","util/url","layout/actions","provider/resources","ui/destination/selector","ui/feedback","ui/taskQueue/taskQueue"],function(e,t,r,o,a,n,s,i,l){'use strict';var d=function(e){a.trigger("refresh",{uri:e})};return{start:function(){var a=e(".selector-container"),c=a.data("test"),u=a.data("label"),f=n();s(a,{title:r("Publish \"%s\" to",u),actionName:r("Publish"),icon:"delivery",taskQueue:l,taskCreationData:{testUri:c},taskCreationUrl:o.route("publish","Publish","taoDeliveryRdf"),classUri:a.data("root-class")}).on("query",function(e){var t=this;e.classOnly=!0,f.getResources(e,!0).then(function(r){t.update(r,e)}).catch(function(e){t.trigger("error",e)})}).on("finished",function(e,o){e.task&&e.task.report&&t.isArray(e.task.report.children)&&e.task.report.children.length&&e.task.report.children[0]&&(e.task.report.children[0].data&&e.task.report.children[0].data.uriResource?(i().info(r("%s completed",e.task.taskLabel)),d(e.task.report.children[0].data.uriResource)):o.displayReport(e.task.report.children[0],r("Error")))}).on("continue",function(){d(c)}).on("error",function(e){i().error(e)})}}}),define("taoDeliveryRdf/controller/routes",[],function(){'use strict';return{DeliveryMgmt:{actions:{editDelivery:"controller/DeliveryMgmt/editDelivery",excludeTesttaker:"controller/DeliveryMgmt/testtaker",wizard:"controller/DeliveryMgmt/wizard"}},Publish:{actions:{index:"controller/Publish/index"}}}}),define("taoDeliveryRdf/loader/taoDeliveryRdf.bundle",function(){});